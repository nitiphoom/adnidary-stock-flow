
<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>รายงานการขาย - ระบบจัดการสินค้า</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-pink-50">
    <!-- Navigation -->
    <nav class="bg-white/80 backdrop-blur-md border-b border-white/20 sticky top-0 z-50">
        <div class="container mx-auto px-4">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center space-x-2">
                    <i data-lucide="package" class="h-8 w-8 text-purple-600"></i>
                    <h1 class="text-xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent">
                        ระบบจัดการสินค้า
                    </h1>
                </div>
                <a href="index.html" class="text-gray-700 hover:text-purple-600 px-3 py-2 rounded-md">← กลับหน้าหลัก</a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <div class="max-w-7xl mx-auto">
            <h2 class="text-2xl font-bold mb-6 flex items-center">
                <i data-lucide="bar-chart-3" class="h-6 w-6 mr-2 text-green-600"></i>
                รายงานการขาย
            </h2>

            <!-- Summary Cards -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                <div class="bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-green-100">ยอดขายรวม</p>
                            <p class="text-3xl font-bold">฿826,000</p>
                        </div>
                        <i data-lucide="dollar-sign" class="h-10 w-10 text-green-200"></i>
                    </div>
                </div>
                
                <div class="bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-blue-100">จำนวนที่ขาย</p>
                            <p class="text-3xl font-bold">3,030</p>
                        </div>
                        <i data-lucide="package" class="h-10 w-10 text-blue-200"></i>
                    </div>
                </div>
                
                <div class="bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-lg p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-purple-100">เฉลี่ยต่อเดือน</p>
                            <p class="text-3xl font-bold">฿138,000</p>
                        </div>
                        <i data-lucide="trending-up" class="h-10 w-10 text-purple-200"></i>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="bg-white/80 backdrop-blur-md border border-white/20 rounded-lg p-6 shadow-lg mb-6">
                <h3 class="text-lg font-semibold mb-4 flex items-center">
                    <i data-lucide="calendar" class="h-5 w-5 mr-2"></i>
                    ตัวเลือกรายงาน
                </h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium mb-2">ประเภทรายงาน</label>
                        <select id="reportType" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
                            <option value="overview">ภาพรวม</option>
                            <option value="branch">รายสาขา</option>
                            <option value="person">รายบุคคล</option>
                        </select>
                    </div>
                    
                    <div id="periodContainer">
                        <label class="block text-sm font-medium mb-2">ช่วงเวลา</label>
                        <select id="period" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
                            <option value="daily">รายวัน</option>
                            <option value="weekly">รายสัปดาห์</option>
                            <option value="monthly">รายเดือน</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Charts Container -->
            <div id="chartsContainer" class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                <!-- Sales Amount Chart -->
                <div class="bg-white/80 backdrop-blur-md border border-white/20 rounded-lg p-6 shadow-lg">
                    <h4 class="text-lg font-semibold mb-4">ยอดขาย (รายเดือน)</h4>
                    <div class="h-80">
                        <canvas id="salesChart"></canvas>
                    </div>
                </div>

                <!-- Sales Quantity Chart -->
                <div class="bg-white/80 backdrop-blur-md border border-white/20 rounded-lg p-6 shadow-lg">
                    <h4 class="text-lg font-semibold mb-4">จำนวนที่ขาย (รายเดือน)</h4>
                    <div class="h-80">
                        <canvas id="quantityChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Branch/Person Reports -->
            <div id="listContainer" class="hidden bg-white/80 backdrop-blur-md border border-white/20 rounded-lg p-6 shadow-lg">
                <h4 id="listTitle" class="text-lg font-semibold mb-4">รายงานการขายรายสาขา</h4>
                <div id="listContent" class="space-y-4">
                    <!-- Content will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </main>

    <script>
        lucide.createIcons();

        // Sample data
        const monthlyData = {
            labels: ['ม.ค.', 'ก.พ.', 'มี.ค.', 'เม.ย.', 'พ.ค.', 'มิ.ย.'],
            sales: [125000, 98000, 145000, 135000, 165000, 158000],
            quantities: [450, 380, 520, 490, 610, 580]
        };

        const weeklyData = {
            labels: ['สัปดาห์ 1', 'สัปดาห์ 2', 'สัปดาห์ 3', 'สัปดาห์ 4'],
            sales: [35000, 42000, 38000, 45000],
            quantities: [120, 135, 148, 167]
        };

        const dailyData = {
            labels: ['จ', 'อ', 'พ', 'พฤ', 'ศ', 'ส', 'อา'],
            sales: [22000, 25000, 19500, 28000, 32000, 36000, 23500],
            quantities: [85, 92, 78, 105, 120, 135, 88]
        };

        const branchData = [
            { name: 'สาขา A', amount: 350000, quantity: 1200 },
            { name: 'สาขา B', amount: 245000, quantity: 890 },
            { name: 'สาขา C', amount: 198000, quantity: 756 }
        ];

        const personData = [
            { name: 'คุณสมชาย', amount: 125000, quantity: 450 },
            { name: 'คุณสมหญิง', amount: 98000, quantity: 380 },
            { name: 'คุณสมศักดิ์', amount: 85000, quantity: 320 },
            { name: 'คุณสมใจ', amount: 78000, quantity: 290 }
        ];

        let salesChart, quantityChart;

        function initCharts() {
            const salesCtx = document.getElementById('salesChart').getContext('2d');
            const quantityCtx = document.getElementById('quantityChart').getContext('2d');

            salesChart = new Chart(salesCtx, {
                type: 'bar',
                data: {
                    labels: monthlyData.labels,
                    datasets: [{
                        label: 'ยอดขาย (บาท)',
                        data: monthlyData.sales,
                        backgroundColor: 'rgba(34, 197, 94, 0.8)',
                        borderColor: 'rgba(34, 197, 94, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return '฿' + value.toLocaleString();
                                }
                            }
                        }
                    }
                }
            });

            quantityChart = new Chart(quantityCtx, {
                type: 'line',
                data: {
                    labels: monthlyData.labels,
                    datasets: [{
                        label: 'จำนวน (ชิ้น)',
                        data: monthlyData.quantities,
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        borderColor: 'rgba(59, 130, 246, 1)',
                        borderWidth: 2,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }

        function updateCharts(period) {
            let data;
            switch(period) {
                case 'daily':
                    data = dailyData;
                    break;
                case 'weekly':
                    data = weeklyData;
                    break;
                default:
                    data = monthlyData;
            }

            salesChart.data.labels = data.labels;
            salesChart.data.datasets[0].data = data.sales;
            salesChart.update();

            quantityChart.data.labels = data.labels;
            quantityChart.data.datasets[0].data = data.quantities;
            quantityChart.update();
        }

        function showList(type) {
            const container = document.getElementById('listContainer');
            const title = document.getElementById('listTitle');
            const content = document.getElementById('listContent');
            const chartsContainer = document.getElementById('chartsContainer');

            if (type === 'overview') {
                container.classList.add('hidden');
                chartsContainer.classList.remove('hidden');
                return;
            }

            chartsContainer.classList.add('hidden');
            container.classList.remove('hidden');

            const data = type === 'branch' ? branchData : personData;
            title.textContent = type === 'branch' ? 'รายงานการขายรายสาขา' : 'รายงานการขายรายบุคคล';

            content.innerHTML = data.map((item, index) => {
                const maxAmount = data[0].amount;
                const percentage = (item.amount / maxAmount) * 100;
                const colorClass = type === 'branch' ? 'bg-green-500' : 'bg-blue-500';
                const textColor = type === 'branch' ? 'text-green-600' : 'text-blue-600';

                return `
                    <div class="border rounded-lg p-4">
                        <div class="flex justify-between items-center mb-2">
                            <h5 class="font-semibold text-lg">${item.name}</h5>
                            <div class="text-right">
                                <p class="text-xl font-bold ${textColor}">
                                    ฿${item.amount.toLocaleString()}
                                </p>
                                <p class="text-sm text-gray-600">
                                    ${item.quantity.toLocaleString()} ชิ้น
                                </p>
                            </div>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2">
                            <div class="${colorClass} h-2 rounded-full" style="width: ${percentage}%"></div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Event listeners
        document.getElementById('reportType').addEventListener('change', function(e) {
            const type = e.target.value;
            const periodContainer = document.getElementById('periodContainer');
            
            if (type === 'overview') {
                periodContainer.style.display = 'block';
            } else {
                periodContainer.style.display = 'none';
            }
            
            showList(type);
        });

        document.getElementById('period').addEventListener('change', function(e) {
            updateCharts(e.target.value);
        });

        // Initialize
        initCharts();
    </script>
</body>
</html>
